<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note</title>

    <!-- codemirror -->
    <script src="node_modules/codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css">
    <script src="node_modules/codemirror/mode/markdown/markdown.js"></script>
    <script src="node_modules/codemirror/addon/edit/continuelist.js"></script>
    <script src="node_modules/codemirror/addon/edit/closebrackets.js"></script>
    <script src="node_modules/codemirror/addon/mode/overlay.js"></script>
    <script src="node_modules/codemirror/addon/search/search.js"></script>
    <script src="node_modules/codemirror/addon/fold/markdown-fold.js"></script>
    <script src="cmMode.js"></script>
    <link rel="stylesheet" href="cm.css">

    <script src="node_modules/mermaid/dist/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            mermaid.initialize({ startOnLoad: false });
        });
    </script>

    <!-- viewer -->
    <link rel="stylesheet" href="node_modules/viewerjs/dist/viewer.css">
    <script src="node_modules/viewerjs/dist/viewer.common.js"></script>

    <!-- styles -->
    <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="pagestyle.css">
    <link rel="stylesheet" href="node_modules/highlight.js/styles/atom-one-dark.min.css">

    <!-- math equations -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    MathJax.startup.promise.then(() => { });
                }
            }
        };
    </script>
    <script src="node_modules/mathjax/es5/tex-chtml.js"></script>
</head>

<body>
    <div id="searchDiv" style="display: none;">
        <input type="search" id="searchBox" placeholder="Enter search term"></input>
        <button id="findNextButton" title="Find next (Ctrl + G)"><i class="fa-solid fa-chevron-down"></i></button>
        <button id="findPreviousButton" title="Find previous (Ctrl + Shift + G)"><i
                class="fa-solid fa-chevron-up"></i></button>
        <button id="stopSearchButton" style="width: 20px;" title="Stop searching (Esc)"><i
                class="fas fa-times"></i></button>
    </div>

    <div id="suggestions">
        <input type="text" id="suggestion-input">
        <div id="suggestion-options"></div>
    </div>

    <div id="toolbar">
        <div id="leftContainer" style="display: flex;">
            <button id="menuButton" style="width: 20px;" title="Menu">
                <i class="fa-solid fa-bars"></i>
            </button>
            <button id="navigate-back" title="Previous Page">
                <i class="fa-solid fa-arrow-left no-navigate"></i>
            </button>
            <button id="navigate-forward" title="Next Page">
                <i class="fa-solid fa-arrow-right no-navigate"></i>
            </button>
        </div>

        <div id="file-name"></div>

        <div id="rightContainer">
            <button id="toggleReader" title="Reader mode">
                <i class="fa-solid fa-book-open"></i>
            </button>
            <button id="toggleEdit" title="Edit mode">
                <i class="fa-solid fa-pen-to-square"></i>
            </button>
            <button id="exportMarkdown" title="Export to Markdown">
                <i class="fa-brands fa-markdown"></i>
            </button>
            <div id="toggleColumn">
                <button id="toggleColumnButton" title="Toggle notes or cues">
                    <i class="fa-solid fa-grip-vertical"></i>
                </button>
                <div id="dropdown-content">
                    <label><input type="checkbox" id="cueCheckbox" value="true" checked>Cue</label>
                    <label><input type="checkbox" id="noteCheckbox" value="true" checked>Note</label>
                </div>
            </div>
            <button id="toggleOutline" title="Toggle outline">
                <i class="fa-solid fa-list"></i>
            </button>
        </div>
    </div>

    <div id="mainContainer" style="display: flex;" class="split">

        <div id="menu" class="default-width">
            <div id="menuButtonDiv">
                <button id="return" title="Return to home page">
                    <i class="fa-solid fa-house"></i>
                </button>
                <button id="createNewFileButton" title="Create note">
                    <i class="fa-solid fa-file-pen"></i>
                </button>
                <button id="createFolderButton" title="Create folder">
                    <i class="fa-solid fa-folder-plus"></i>
                </button>
                <button id="collapse" title="Collapse all">
                    <i class="fa-solid fa-angles-right"></i>
                </button>
                <button id="expand" title="Expand all">
                    <i class="fa-solid fa-angles-down"></i>
                </button>
            </div>

            <div id="searchDocuments">
                <i class="fa-solid fa-magnifying-glass"></i>
                <div id="search-documents-input" contenteditable="plaintext-only" aria-placeholder="Search"></div>
            </div>

            <div id="directory-contents-list" class="directoryNode" data-path="">
                <div id="directory-contents-children" class="directoryChildren" data-path=""></div>
            </div>

            <div id="search-documents-list"></div>
        </div>

        <div id="editorContainer">
            <input type="text" id="title">
            <div id="init" class="no-drag">
                <div class="buttons">
                    <button id="startButton" title="Insert block on top"><i class="fas fa-plus"></i></button>
                </div>
            </div>
            <div id="blocks">
                <!-- blocks go here -->
            </div>
        </div>

        <div id="outline" class="zero-width">
            <div id="outlineList">
                <!-- outline items here -->
            </div>
        </div>
    </div>

    <div id="bottomBar">
        <div id="log"></div>
    </div>

    <!-- data management -->
    <script src="saveData.js"></script>
    <!-- page management -->

    <script src="redoUndo.js"></script>
    <script src="addRemoveBlocks.js"></script>
    <script>
        setUpBlockInsertion();
    </script>
    <script src="pageFunctions.js"></script>
    <script src="importData.js"></script>

    <script src="clickLinks.js"></script>

    <!-- search function -->
    <script src="findInPage.js"></script>
    <script src="searchDocuments.js"></script>
    <script src="linkBlocks.js"></script>

    <!-- menu -->
    <script src="menu.js"></script>

    <!-- outline -->
    <script src="outline.js"></script>

    <!-- log -->
    <script>

        function logMessage(message) {
            const logElement = document.getElementById('log');
            logElement.innerHTML = '';
            logElement.innerHTML = message;

            setTimeout(() => {
                logElement.innerHTML = ''; // Clear the message
            }, 5000); // 10000 milliseconds = 10 seconds
        }

        ipcRenderer.on('log-message', (event, message) => {
            logMessage(message)
        });
    </script>

    <script>
        const Split = require('split.js')

        document.addEventListener('DOMContentLoaded', function () {
            Split(['#menu', '#editorContainer', '#outline'], {
                sizes: [20, 50, 20],
                minSize: [200, 300, 200],
                maxSize: [400, Infinity, 400],
                snapOffset: 0,
                expandToMin: true,
                gutterSize: 3,
                gutterAlign: 'center',
            });
        })
    </script>

</body>

</html>